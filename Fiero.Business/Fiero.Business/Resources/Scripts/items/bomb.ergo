:- module(bomb, []).
:- subscribe(action, [turn_started]).

began :- 
	set_counter(fuse, 3).
ended :-
	effect(effect_def(explosion, 2), @owner, _).

tick :-
	counter(fuse, T),
	position(@owner, P),
	animate(false, P, [damage_number{damage: T, tint: light_red}]).

tock :-
	update_counter(fuse, decrement, T), 
	(T < 0) -> end.

action:turn_started(_) :-
	tick, tock.