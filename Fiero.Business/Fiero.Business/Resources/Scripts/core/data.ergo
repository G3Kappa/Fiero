% Do not modify unless you know what you are doing.

:- module(data, []).

:- op(700, xf, [delete]).
:- op(700, xfy, [set]).
:- op(700, xfy, [get]).
:- op(700, xfy, [update]).

:- dynamic(d_/2).

delete(Name) :-
	(retractall(d_(Name, _)) ; true), !.

set(Name, Value) :-
	delete(Name),
	assertz(d_(Name, Value)).

get(Name, Value) :- d_(Name, Value).

update(Name, Lambda) :-
	d_(Name, OldValue), 
	call(Lambda, OldValue, NewValue),
	set(Name, NewValue).
