:- module(test, []).

:- subscribe(action, [actor_killed]).
:- dynamic(owner_id/1).

% Remember the id of any actor who uses this effect
test:began(E) :- asserta(owner_id(&E.owner.id)).
test:ended(E) :- retract(owner_id(&E.owner.id)).

% Heal owners by 10HP when they kill someone
action:actor_killed(_{killer: _{ id: Id, actor: Comp }}) :- 
	owner_id(Id),
	write('we'), nl,
	Comp.hp := &Comp.hp + 10.