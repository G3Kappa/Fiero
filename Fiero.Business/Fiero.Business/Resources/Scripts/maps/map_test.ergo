:- module(map_test, []).
:- use_module(fiero).
:- use_module(random).
:- use_module(map).
:- use_module(prefabs_test).
:- map(49, 49).

step{ size: p(W, H) } #-> [
	fill_rect(room, p(W, H), p(0, 0)),
	draw_rect(wall, p(W, H), p(0, 0))
].

step{ size: p(W, H) } #-> [
	place_prefab(_, _, _{ tags: {spawn}, center_y: true, center_x: true}, p(:=(W/2), :=(H/2)))
].

step{ } #-> [
	place_prefab('room_2x1', _, _{ rotate: 90 , mirror_x: true }, p(3, 5)),
	place_prefab('room_2x1', _, _{ rotate: 180, mirror_x: true }, p(14, 5)),
	place_prefab('room_2x1', _, _{ rotate: 270, mirror_y: true }, p(25, 5)),
	place_prefab('room_2x1', _, _{ rotate: 360, mirror_y: true }, p(36, 5)),
	place_prefab('room_1x1', _, _{ rotate: 90 , mirror_x: true }, p(3, 35)),
	place_prefab('room_1x1', _, _{ rotate: 180, mirror_x: true }, p(14, 35)),
	place_prefab('room_1x1', _, _{ rotate: 270, mirror_y: true }, p(25, 35))
].
